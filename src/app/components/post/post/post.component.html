<div class="p-6">
  <p-card class="max-w-3xl mx-auto shadow-lg">
    <ng-template pTemplate="header">
      <img
        *ngIf="!!post.bannerUrl"
        [src]="post.bannerUrl"
        alt="Blog Post Image"
        class="w-full h-64 object-cover rounded-t-lg"
      />
    </ng-template>

    <div class="p-4">
      <div class="flex justify-between">
        <h2 class="text-2xl font-bold mb-2">{{ post.title }}</h2>
        <p-button
          type="button"
          icon="pi pi-pencil"
          styleClass="p-button-rounded"
          severity="secondary"
          [routerLink]="editLink()"
          *ngIf="isEditable"
        ></p-button>
      </div>
      <div class="flex items-center text-sm text-gray-500 mb-4">
        <span class="mr-4 flex items-center">
          <i class="pi pi-user mr-2"></i> {{ post.fullName }}
        </span>
        <span class="flex items-center">
          <i class="pi pi-calendar mr-2"></i> {{ formatDate(post.createdAt) }}
        </span>
      </div>
      <p class="text-gray-700 leading-relaxed mb-6">
        {{ post.content }}
      </p>

      <div class="mt-4">
        <h3 class="text-xl font-semibold mb-2">Deixe um comentário:</h3>
        <form class="flex gap-2" [formGroup]="newCommentForm">
          <input
            type="text"
            pInputText
            name="comment"
            [disabled]="!isLogged()"
            formControlName="comment"
            class="p-inputtext p-component w-full"
            [placeholder]="inputCommentPlaceholder()"
          />
          <p-button
            type="button"
            label="Enviar"
            severity="info"
            class="p-button-outlined"
            [disabled]="!isLogged() || !newCommentForm.valid"
            (onClick)="comment()"
          ></p-button>
        </form>
      </div>

      <div class="mt-6">
        <h3 class="text-xl font-semibold mb-2">Comentários:</h3>
        <div *ngIf="post?.comments?.length === 0" class="text-gray-500">
          Nenhum comentário ainda. Seja o primeiro!
        </div>
        <div *ngFor="let comment of post?.comments" class="mb-3 border-b pb-2">
          <p class="text-gray-800">
            <strong>{{ comment.fullName }}</strong
            >: {{ comment.content }}
          </p>
        </div>
      </div>
    </div>
  </p-card>
</div>
